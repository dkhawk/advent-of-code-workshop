package aoc2015.day1

import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.async
import kotlinx.coroutines.delay
import kotlinx.coroutines.launch
import kotlinx.coroutines.runBlocking

fun complex1() = runBlocking {
  val input = readInput()

  val upJob = async {
    val c = input.count { it == '(' }
    c
  }

  val downJob = async {
    delay(50)
    val c = input.count { it == ')' }
    c
  }

  val counter = launch {
    var i = 0
    while (true) {
      println(i++)
      delay(100)
    }
  }

  val answer = upJob.await() - downJob.await()
  println(answer)
  counter.cancel()
}

private fun readInput(): String {
  return "((((()(()(((((((()))(((()((((()())(())()(((()((((((()((()(()(((()(()((())))()((()()())" +
    "))))))))()((((((())((()))(((((()(((((((((()()))((()(())()((())((()(()))((()))()))()(((((()" +
    "(((()()))()())((()((((())()())()((((())()(()(()(((()(())(()(())(((((((())()()(((())(()(()(" +
    "()(())))(()((((())((()))(((()(()()(((((()()(()(((()(((((())()))()((()(()))()((()((((())((((" +
    "())(()(((())()()(()()()()()(())((((())((())(()()))()((((())))((((()())()((((())((()())((())" +
    "(())(((((()((((()(((()((((())(()(((()()))()))((((((()((())()())))(((()(()))(()()(()(((()(()" +
    "))((()()()())((()()()(((())())()())())())((()))(()(()))(((((()(()(())((()(())(())()((((()()" +
    ")()))((((())(())((())())((((()(((())(())((()()((((()((((((()(())()()(()(()()((((()))(())()(" +
    "))()))(())))(())))())()()(())(()))()((()(()(())()()))(()())))))(()))(()()))(())(((((()(()((" +
    ")()((())()())))))((())())((())(()(())((()))(())(((()((((((((()()()(()))()()(((()))()((()()(" +
    "())(())())()(()(())))(((((()(())(())(()))))())()))(()))()(()(((((((()((((())))())())())())(" +
    ")((((((((((((((()()((((((()()()())())()())())())(())(())))())((()())((()(()))))))()))))))))" +
    "))))))))())((())((())()()))))))(((()((()(()()))((())(()()))()()())))(())))))))(()(((())))()" +
    ")()())))()()(())()))()(()))())((()()))))(()))))()))(()()(())))))))()(((()))))()(()))(())())" +
    "))))()))((()))((()))())(())))))))))((((())()))()))()))())(())()()(())))())))(()())()))((()(" +
    ")(())))(())((((((()(())((()(((()(()()(())))()))))))()))()(()((()))()(()))(()(((())((((())()" +
    ")(())(()))))))))())))))))())())))))())))))()()(((())()(()))))))))())))))(())()()()))()))())" +
    ")(()(())()()())())))))))())()(()(()))))()()()))))())(()))))()()))))()())))))(((())()()))(()" +
    "))))))))))()()))))()()()))))(()())())()()())()(()))))()(()))(())))))))(((((())(())())()()))" +
    "()()))(())))))()(()))))(())(()()))()())()))()))()))()))))())()()))())())))(()))(()))))))())" +
    "()(((())()))))))))()))()())))())))())))()))))))))))()()))(()()))))))(())()(()))))())(()))))" +
    "(()))))(()())))))())())()()))))())()))))))))(()))))()))))))()(()())))))))()))())))())))()))" +
    ")())))))))())(()()))))))(()())())))()())()))))))))))))))())))()(())))()))())()()(())(()()))" +
    "(())))())()())(()(()(()))))())))))))))))())(()))()))()))))(())()())()())))))))))))()())))))" +
    ")))))))())())))))(()())))))))))))())(())))()))))))))())())(()))()))(())))()))()()(())()))))" +
    "))()((((())()))())())))))()))()))))((()())()))))())))(())))))))))))))))))()))))()()())()))(" +
    ")()))))())()))((()())))())))(()))(()())))))))()))()))))(())))))))(())))))())()()(()))())())" +
    ")()()))))())()()))))())()))())))))))(()))))()())()))))))))(()))())))(()))()))))(())()))())(" +
    "))(())())())))))))((((())))))()))()))()())()(())))()))()))()())(()())()()(()())()))))())())" +
    "))))(()))()))))())(()()(())))))(())()()((())())))))(())(())))))))())))))))))()(())))))))()(" +
    "))())())()(()))))))))(()))))))))())()()))()(()))))))()))))))())))))))(())))()()(())()()))))" +
    ")(((())))()((())()))())))(()()))())(())())))()(((()())))))()(()()())))()()(()()(()()))())()" +
    "(()()()))())()()))()())(()))))())))))())))(())()()))))(()))))(())(()))(())))))()()))()))))(" +
    "))()))()()(())())))((()))())()))))))()()))))((()(()))))()()))))))())))))())(()((()())))))))" +
    "))))()())())))()))(()))))))(()))(())()())))(()))))))))())()()()()))))(()())))))))((())))())" +
    ")(()))(())(())()())()))))))))(())))())))(()))()()))(()()))(()))())))()(())))())((()((()(())" +
    "))((())))()))))((((())())()())))(())))()))))))())(()()((())))())()(()())))))(()())()))())))" +
    "))))((())())))))))(()(()))())()()(()()(((()(((()())))))()))))))()(())(()()((()()(())()()))(" +
    "))()())()))()())())())))))))(((())))))))()()))))))(((())()))(()()))(()()))))(()(()()((((())" +
    "()())((()()))))(()(())))))()((()()()())()()((()((()()))(()))(((()()()))(((())))()(((())()))" +
    "))))((()(())())))(()())(((((()(()))(()((()))(()())()))))(()(()))()(()))(())(((())(()()))))(" +
    ")()))(((()))))(()()()()))())))((()()()(())()))()))))()()))()))))))((((((()()()))))())((()()" +
    "(((()))))(()(())(()()())())())))()(((()()))(())((())))(()))(()()()())((())())())(()))))()))" +
    "()((()(())()(()()(())(()))(())()))(())(()))))(())(())())(()()(()((()()((())))((()))()((())))(((()()()()((((()))(()()))()()()(((())((())())(()()(()()()))()((())(())()))())(((()()(())))()((()()())()())(()(())())(((())(())())((())(())()(((()()))(())))((())(()())())(())((()()()((((((())))((()(((((())()))()))(())(()()))()))(())()()))(())((()()())()()(()))())()((())))()((()()())((((()())((())())())((()((()))()))((())((()()(()((()()(((())(()()))))((()((())()(((())(()((())())((())(()((((((())())()(()())()(())(((())((((((()(())(()((()()()((()()(()()()())))()()(((((()()))()((((((()))()(()(()(()(((()())((()))())()((()))(())))()))()()))())()()))())((((())(()(()))(((((((())(((()(((((()(((()()((((())(((())())))(()()()(()(()))()))((((((()))((()(((()(())((()((((()((((((())(((((())))(((()(()))))(((()(((())()((())(()((()))(((()()(((())((((()(()(((((()))(((()(((((((()(()()()(()(()(()()())(())(((((()(())())()())(()(()(()))()(()()()())(()()(()((()))()((())())()(()))((())(()))()(()))()(((()(()(()((((((()()()()())()(((((()()(((()()()((()(((((()))((((((((()()()(((((()))))))(()()()(())(()))(()()))))(())()))(((((()(((((()()(()(()())(((()))((((()((()(()(()((()(()((())))()(((()((()))((()))(((((((((()((()((()(())))()((((()((()()))((())(((()(((((()()(()(()()((()(()()()(((((((())())()())))))((((()()(()))()))(()((())()(()(((((((((()()(((()(()())(()((()())((())())((((()(((()(((()((((()((()((((()(()((((((())((((((((((((()()(()()((((((((((((((()((()()))()((((((((((((())((((()(()())((()(()(()))()(((((()()(((()()))()())(())((()(((((()((())(((((()((()(((((()))()()((((())()((((())(((((((((()(())(()(())))())(()((())(((())(())(())())(()(()(())()()((()((())()(((()(((((()(())))()(((()((())))((()()()(((()(((()((()(()(())(()((()())(()(()(((()(((((((((())(()((((()()))(()((((()()()()(((()((((((((()(()()((((((()(()()(()((()((((((((((()()(((((((()())(())))(((()()))(((((()((()()())(()()((((())((()((((()))))(())((()(()()(((()(()(((()((((()(((((()))())())(()((())()))(((()())((())((())((((()((()((((((())(()((((()()))((((((())()(()))((()(((())((((((((((()()(((((()(((((()((()()()((((())))(()))()((()(())()()((()((((((((((()((())(())(((((()(()(()()))((((()((((()()((()(((()(((((((((()(()((()((()))((((((()(((())()()((()(((((((()())))()()(()((()((()()(((()(()()()()((((()((())((((()(((((((((()(((()()(((()(()(((()(((()((())()(()((()(()(()(()))()(((()))(()((((()((())((((())((((((())(()))(()((((())((()(()((((((((()()((((((()(()(()()()(())((()((()()(((()(((((((()()((()(((((((()))(((((()(((()(()()()(()(((()((()()((())(()(((((((((()(()((()((((((()()((())()))(((((()((())()())()(((((((((((()))((((()()()()())(()()(()(()()))()))(()))(()(((()()))())(()(()))()()((())(()())()())()(()))()))(()()(()((((((())((()(((((((((((()(())()((()(()((()((()(()((()((((((((((()()())((())()(())))((())()())()(((((()(()())((((()((()(())(()))(((())()((()))(((((())(()))()()(()))(((())((((()((((()(())))(((((((()))))())()())(())((())()(()()((()(()))()(()()(()()((()())((())((()()))((((()))()()))(()()(())()()(((((()(())((()((((()))()))(()())())(((()()(()()))(())))))(()))((())(((((()((((()))()((((()))()((())(((())))(((()())))((()(()()(("
}
